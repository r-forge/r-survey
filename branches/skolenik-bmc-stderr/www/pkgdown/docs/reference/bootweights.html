<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Compute survey bootstrap weights — bootweights • survey</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Compute survey bootstrap weights — bootweights"><meta property="og:description" content="Bootstrap weights for infinite populations ('with replacement' sampling) are created by sampling with
replacement from the PSUs in each stratum. subbootweights()
samples n-1 PSUs from the n available (Rao and Wu),
bootweights samples n (Canty and Davison).
For multistage designs or those with large sampling fractions,
mrbweights implements Preston's multistage rescaled
bootstrap. The multistage rescaled bootstrap is still useful for
single-stage designs with small sampling fractions, where it reduces
to a half-sample replicate method."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">survey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute survey bootstrap weights</h1>
    
    <div class="hidden name"><code>bootweights.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Bootstrap weights for infinite populations ('with replacement' sampling) are created by sampling with
replacement from the PSUs in each stratum. <code>subbootweights()</code>
samples <code>n-1</code> PSUs from the <code>n</code> available (Rao and Wu),
<code>bootweights</code> samples <code>n</code> (Canty and Davison).</p>
<p>For multistage designs or those with large sampling fractions,
<code>mrbweights</code> implements Preston's multistage rescaled
bootstrap. The multistage rescaled bootstrap is still useful for
single-stage designs with small sampling fractions, where it reduces
to a half-sample replicate method.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bootweights</span><span class="op">(</span><span class="va">strata</span>, <span class="va">psu</span>, replicates <span class="op">=</span> <span class="fl">50</span>, fpc <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>         fpctype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"population"</span>, <span class="st">"fraction"</span>, <span class="st">"correction"</span><span class="op">)</span>,</span>
<span>         compress <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">subbootweights</span><span class="op">(</span><span class="va">strata</span>, <span class="va">psu</span>, replicates <span class="op">=</span> <span class="fl">50</span>, compress <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">mrbweights</span><span class="op">(</span><span class="va">clusters</span>, <span class="va">stratas</span>, <span class="va">fpcs</span>, replicates<span class="op">=</span><span class="fl">50</span>, </span>
<span>         multicore<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"survey.multicore"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>strata</dt>
<dd><p>Identifier for sampling strata (top level only)</p></dd>

  <dt>stratas</dt>
<dd><p>data frame of strata for all stages of sampling</p></dd>

  <dt>psu</dt>
<dd><p>Identifier for primary sampling units</p></dd>

  <dt>clusters</dt>
<dd><p>data frame of identifiers for sampling units at each stage</p></dd>

  <dt>replicates</dt>
<dd><p>Number of bootstrap replicates</p></dd>

  <dt>fpc</dt>
<dd><p>Finite population correction (top level only)</p></dd>

  <dt>fpctype</dt>
<dd><p>Is <code>fpc</code> the population size, sampling fraction,
    or 1-sampling fraction?</p></dd>

  <dt>fpcs</dt>
<dd><p><code>survey_fpc</code> object with population and sample size at each stage</p></dd>

  <dt>compress</dt>
<dd><p>Should the replicate weights be compressed?</p></dd>

   <dt>multicore</dt>
<dd><p>Use the <code>multicore</code> package to generate the replicates in parallel</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A set of replicate weights</p>
    </div>
    <div id="warning">
    <h2>warning</h2>
    <p>With <code>multicore=TRUE</code> the resampling procedure does not
use the current random seed, so the results cannot be exactly
reproduced even by using <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code></p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>These bootstraps are strictly appropriate only when the first stage of
sampling is a simple or stratified random sample of PSUs with or
without replacement, and not (eg) for PPS sampling.  The functions
will not enforce simple random sampling, so they can be used
(approximately) for data that have had non-response corrections and
other weight adjustments.  It is preferable to apply these adjustments
after creating the bootstrap replicate weights, but that may not be
possible with public-use data.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Canty AJ, Davison AC. (1999) Resampling-based variance
  estimation for labour force surveys. The Statistician 48:379-391</p>
<p>Judkins, D. (1990), "Fay's Method for Variance Estimation" Journal of Official Statistics, 6, 223-239.</p>
<p>Preston J. (2009) Rescaled bootstrap for stratified multistage sampling. Survey Methodology 35(2) 227-234</p>
<p>Rao JNK, Wu CFJ. Bootstrap inference for sample surveys. Proc Section
  on Survey Research Methodology. 1993 (866--871)</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="as.svrepdesign.html">as.svrepdesign</a></code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by “Thomas Lumley”.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

