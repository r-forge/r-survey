<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convert a survey design to use replicate weights — as.svrepdesign • survey</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Convert a survey design to use replicate weights — as.svrepdesign"><meta property="og:description" content="Creates a replicate-weights survey design object from a traditional
  strata/cluster survey design object. JK1 and JKn are
  jackknife methods, BRR is Balanced Repeated Replicates and
  Fay is Fay's modification of this, bootstrap is Canty
  and Davison's bootstrap, subbootstrap is Rao and Wu's
  \((n-1)\) bootstrap, and mrbbootstrap is Preston's multistage
  rescaled bootstrap.  With a svyimputationList object, the same
  replicate weights will be used for each imputation if the sampling
  weights are all the same and separate.replicates=FALSE."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">survey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert a survey design to use replicate weights</h1>
    
    <div class="hidden name"><code>as.svrepdesign.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a replicate-weights survey design object from a traditional
  strata/cluster survey design object. <code>JK1</code> and <code>JKn</code> are
  jackknife methods, <code>BRR</code> is Balanced Repeated Replicates and
  <code>Fay</code> is Fay's modification of this, <code>bootstrap</code> is Canty
  and Davison's bootstrap, <code>subbootstrap</code> is Rao and Wu's
  \((n-1)\) bootstrap, and <code>mrbbootstrap</code> is Preston's multistage
  rescaled bootstrap.  With a <code>svyimputationList</code> object, the same
  replicate weights will be used for each imputation if the sampling
  weights are all the same and <code>separate.replicates=FALSE</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">design</span>,<span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">design</span>, type<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"JK1"</span>, <span class="st">"JKn"</span>, <span class="st">"BRR"</span>, <span class="st">"bootstrap"</span>,</span>
<span>   <span class="st">"subbootstrap"</span>,<span class="st">"mrbbootstrap"</span>,<span class="st">"Fay"</span><span class="op">)</span>,</span>
<span>   fay.rho <span class="op">=</span> <span class="fl">0</span>, fpc<span class="op">=</span><span class="cn">NULL</span>,fpctype<span class="op">=</span><span class="cn">NULL</span>,<span class="va">...</span>, compress<span class="op">=</span><span class="cn">TRUE</span>, </span>
<span>   mse<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"survey.replicates.mse"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># S3 method for svyimputationList</span></span>
<span><span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">design</span>, type<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"JK1"</span>, <span class="st">"JKn"</span>, <span class="st">"BRR"</span>, <span class="st">"bootstrap"</span>,</span>
<span>   <span class="st">"subbootstrap"</span>,<span class="st">"mrbbootstrap"</span>,<span class="st">"Fay"</span><span class="op">)</span>,</span>
<span>   fay.rho <span class="op">=</span> <span class="fl">0</span>, fpc<span class="op">=</span><span class="cn">NULL</span>,fpctype<span class="op">=</span><span class="cn">NULL</span>, separate.replicates<span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span>, compress<span class="op">=</span><span class="cn">TRUE</span>, </span>
<span>   mse<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"survey.replicates.mse"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>design</dt>
<dd><p>Object of class <code>survey.design</code> or
    <code>svyimputationList</code>. Must not have been
    post-stratified/raked/calibrated in R</p></dd>

  <dt>type</dt>
<dd><p>Type of replicate weights. <code>"auto"</code> uses JKn for
    stratified, JK1 for unstratified designs</p></dd>

  <dt>fay.rho</dt>
<dd><p>Tuning parameter for Fay's variance method</p></dd>

  <dt>fpc,fpctype,...</dt>
<dd><p>Passed to <code>jk1weights</code>, <code>jknweights</code>,
    <code>brrweights</code>, <code>bootweights</code>, <code>subbootweights</code>, or
    <code>mrbweights</code>.</p></dd>

  <dt>separate.replicates</dt>
<dd><p>Compute replicate weights separately for
    each design (useful for the bootstrap types, which are not deterministic</p></dd>

  <dt>compress</dt>
<dd><p>Use a compressed representation of the replicate
    weights matrix.</p></dd>

  <dt>mse</dt>
<dd><p>if <code>TRUE</code>, compute variances from sums of squares around
    the point estimate, rather than the mean of the replicates</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Object of class <code>svyrep.design</code>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Canty AJ, Davison AC. (1999) Resampling-based variance
  estimation for labour force surveys. The Statistician 48:379-391</p>
<p>Judkins, D. (1990), "Fay's Method for Variance Estimation," Journal of Official Statistics, 6, 223-239.</p>
<p>Preston J. (2009) Rescaled bootstrap for stratified multistage sampling. Survey Methodology 35(2) 227-234</p>
<p>Rao JNK, Wu CFJ. Bootstrap inference for sample surveys. Proc Section
  on Survey Research Methodology. 1993 (866--871)</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="brrweights.html">brrweights</a></code>, <code><a href="svydesign.html">svydesign</a></code>,
  <code><a href="svrepdesign.html">svrepdesign</a></code>, <code><a href="bootweights.html">bootweights</a></code>, <code><a href="bootweights.html">subbootweights</a></code>, <code><a href="bootweights.html">mrbweights</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">scd</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">scddes</span><span class="op">&lt;-</span><span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">scd</span>, prob<span class="op">=</span><span class="op">~</span><span class="fl">1</span>, id<span class="op">=</span><span class="op">~</span><span class="va">ambulance</span>, strata<span class="op">=</span><span class="op">~</span><span class="va">ESA</span>,</span></span>
<span class="r-in"><span>nest<span class="op">=</span><span class="cn">TRUE</span>, fpc<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">scdnofpc</span><span class="op">&lt;-</span><span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">scd</span>, prob<span class="op">=</span><span class="op">~</span><span class="fl">1</span>, id<span class="op">=</span><span class="op">~</span><span class="va">ambulance</span>, strata<span class="op">=</span><span class="op">~</span><span class="va">ESA</span>,</span></span>
<span class="r-in"><span>nest<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># convert to BRR replicate weights</span></span></span>
<span class="r-in"><span><span class="va">scd2brr</span> <span class="op">&lt;-</span> <span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">scdnofpc</span>, type<span class="op">=</span><span class="st">"BRR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">scd2fay</span> <span class="op">&lt;-</span> <span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">scdnofpc</span>, type<span class="op">=</span><span class="st">"Fay"</span>,fay.rho<span class="op">=</span><span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># convert to JKn weights </span></span></span>
<span class="r-in"><span><span class="va">scd2jkn</span> <span class="op">&lt;-</span> <span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">scdnofpc</span>, type<span class="op">=</span><span class="st">"JKn"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># convert to JKn weights with finite population correction</span></span></span>
<span class="r-in"><span><span class="va">scd2jknf</span> <span class="op">&lt;-</span> <span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">scddes</span>, type<span class="op">=</span><span class="st">"JKn"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## with user-supplied hadamard matrix</span></span></span>
<span class="r-in"><span><span class="va">scd2brr1</span> <span class="op">&lt;-</span> <span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">scdnofpc</span>, type<span class="op">=</span><span class="st">"BRR"</span>, hadamard.matrix<span class="op">=</span><span class="fu"><a href="paley.html">paley</a></span><span class="op">(</span><span class="fl">11</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="svyratio.html">svyratio</a></span><span class="op">(</span><span class="op">~</span><span class="va">alive</span>, <span class="op">~</span><span class="va">arrests</span>, design<span class="op">=</span><span class="va">scd2brr</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratio estimator: svyratio.svyrep.design(~alive, ~arrests, design = scd2brr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratios=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         arrests</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alive 0.1535064</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SEs=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             [,1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.009418401</span>
<span class="r-in"><span><span class="fu"><a href="svyratio.html">svyratio</a></span><span class="op">(</span><span class="op">~</span><span class="va">alive</span>, <span class="op">~</span><span class="va">arrests</span>, design<span class="op">=</span><span class="va">scd2brr1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratio estimator: svyratio.svyrep.design(~alive, ~arrests, design = scd2brr1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratios=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         arrests</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alive 0.1535064</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SEs=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            [,1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.01001468</span>
<span class="r-in"><span><span class="fu"><a href="svyratio.html">svyratio</a></span><span class="op">(</span><span class="op">~</span><span class="va">alive</span>, <span class="op">~</span><span class="va">arrests</span>, design<span class="op">=</span><span class="va">scd2fay</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratio estimator: svyratio.svyrep.design(~alive, ~arrests, design = scd2fay)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratios=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         arrests</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alive 0.1535064</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SEs=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             [,1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.009525187</span>
<span class="r-in"><span><span class="fu"><a href="svyratio.html">svyratio</a></span><span class="op">(</span><span class="op">~</span><span class="va">alive</span>, <span class="op">~</span><span class="va">arrests</span>, design<span class="op">=</span><span class="va">scd2jkn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratio estimator: svyratio.svyrep.design(~alive, ~arrests, design = scd2jkn)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratios=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         arrests</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alive 0.1535064</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SEs=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             [,1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.009846457</span>
<span class="r-in"><span><span class="fu"><a href="svyratio.html">svyratio</a></span><span class="op">(</span><span class="op">~</span><span class="va">alive</span>, <span class="op">~</span><span class="va">arrests</span>, design<span class="op">=</span><span class="va">scd2jknf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratio estimator: svyratio.svyrep.design(~alive, ~arrests, design = scd2jknf)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratios=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         arrests</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alive 0.1535064</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SEs=</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             [,1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.007627033</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">api</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## one-stage cluster sample</span></span></span>
<span class="r-in"><span><span class="va">dclus1</span><span class="op">&lt;-</span><span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>id<span class="op">=</span><span class="op">~</span><span class="va">dnum</span>, weights<span class="op">=</span><span class="op">~</span><span class="va">pw</span>, data<span class="op">=</span><span class="va">apiclus1</span>, fpc<span class="op">=</span><span class="op">~</span><span class="va">fpc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## convert to JK1 jackknife</span></span></span>
<span class="r-in"><span><span class="va">rclus1</span><span class="op">&lt;-</span><span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">dclus1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## convert to bootstrap</span></span></span>
<span class="r-in"><span><span class="va">bclus1</span><span class="op">&lt;-</span><span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">dclus1</span>,type<span class="op">=</span><span class="st">"bootstrap"</span>, replicates<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svymean</a></span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">dclus1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         mean     SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00 644.17 23.542</span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svytotal</a></span><span class="op">(</span><span class="op">~</span><span class="va">enroll</span>, <span class="va">dclus1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          total     SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> enroll 3404940 932235</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svymean</a></span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">rclus1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         mean     SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00 644.17 26.329</span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svytotal</a></span><span class="op">(</span><span class="op">~</span><span class="va">enroll</span>, <span class="va">rclus1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          total     SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> enroll 3404940 932235</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svymean</a></span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">bclus1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         mean     SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00 644.17 22.157</span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svytotal</a></span><span class="op">(</span><span class="op">~</span><span class="va">enroll</span>, <span class="va">bclus1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          total     SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> enroll 3404940 988476</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dclus2</span><span class="op">&lt;-</span><span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>id <span class="op">=</span> <span class="op">~</span><span class="va">dnum</span> <span class="op">+</span> <span class="va">snum</span>, fpc <span class="op">=</span> <span class="op">~</span><span class="va">fpc1</span> <span class="op">+</span> <span class="va">fpc2</span>, data <span class="op">=</span> <span class="va">apiclus2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mrbclus2</span><span class="op">&lt;-</span><span class="fu">as.svrepdesign</span><span class="op">(</span><span class="va">dclus2</span>, type<span class="op">=</span><span class="st">"mrb"</span>,replicates<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svytotal</a></span><span class="op">(</span><span class="op">~</span><span class="va">api00</span><span class="op">+</span><span class="va">stype</span>, <span class="va">dclus2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             total        SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00  3440375.75 926665.59</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stypeE    3493.55   1119.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stypeH     688.87    289.35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stypeM     946.25    311.81</span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svytotal</a></span><span class="op">(</span><span class="op">~</span><span class="va">api00</span><span class="op">+</span><span class="va">stype</span>, <span class="va">mrbclus2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             total         SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00  3440375.75 1025894.94</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stypeE    3493.55    1222.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stypeH     688.87     309.64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stypeM     946.25     336.74</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by “Thomas Lumley”.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

