<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Deprecated implementation of quantiles — oldsvyquantile • survey</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Deprecated implementation of quantiles — oldsvyquantile"><meta property="og:description" content="Compute quantiles for data from complex surveys. oldsvyquantile
  is the version of the function from before version 4.1 of the package,
  available for backwards compatibility. See svyquantile
  for the current version"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">survey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Deprecated implementation of quantiles</h1>
    
    <div class="hidden name"><code>oldsvyquantile.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Compute quantiles for data from complex surveys. <code>oldsvyquantile</code>
  is the version of the function from before version 4.1 of the package,
  available for backwards compatibility. See <code><a href="svyquantile.html">svyquantile</a></code>
  for the current version</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for survey.design</span></span>
<span><span class="fu">oldsvyquantile</span><span class="op">(</span><span class="va">x</span>, <span class="va">design</span>, <span class="va">quantiles</span>, alpha<span class="op">=</span><span class="fl">0.05</span>,</span>
<span>   ci<span class="op">=</span><span class="cn">FALSE</span>, method <span class="op">=</span> <span class="st">"linear"</span>, f <span class="op">=</span> <span class="fl">1</span>,</span>
<span>   interval.type<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Wald"</span>,<span class="st">"score"</span>,<span class="st">"betaWald"</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">FALSE</span>,se<span class="op">=</span><span class="va">ci</span>,</span>
<span>   ties<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"discrete"</span>,<span class="st">"rounded"</span><span class="op">)</span>, df<span class="op">=</span><span class="cn">NULL</span>,<span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for svyrep.design</span></span>
<span><span class="fu">oldsvyquantile</span><span class="op">(</span><span class="va">x</span>, <span class="va">design</span>, <span class="va">quantiles</span>,</span>
<span>   method <span class="op">=</span><span class="st">"linear"</span>, interval.type<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"probability"</span>,<span class="st">"quantile"</span><span class="op">)</span>, f <span class="op">=</span> <span class="fl">1</span>,</span>
<span>   return.replicates<span class="op">=</span><span class="cn">FALSE</span>, ties<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"discrete"</span>,<span class="st">"rounded"</span><span class="op">)</span>,na.rm<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>   alpha<span class="op">=</span><span class="fl">0.05</span>,df<span class="op">=</span><span class="cn">NULL</span>,<span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A formula, vector or matrix</p></dd>

  <dt>design</dt>
<dd><p><code>survey.design</code> or <code>svyrep.design</code> object</p></dd>

  <dt>quantiles</dt>
<dd><p>Quantiles to estimate</p></dd>

  <dt>method</dt>
<dd><p>see <code><a href="https://rdrr.io/r/stats/approxfun.html" class="external-link">approxfun</a></code></p></dd>

  <dt>f</dt>
<dd><p>see <code><a href="https://rdrr.io/r/stats/approxfun.html" class="external-link">approxfun</a></code></p></dd>

  <dt>ci</dt>
<dd><p>Compute a confidence interval? (relatively slow; needed for <code><a href="svyby.html">svyby</a></code>)</p></dd>

  <dt>se</dt>
<dd><p>Compute standard errors from the confidence interval length?</p></dd>

  <dt>alpha</dt>
<dd><p>Level for confidence interval</p></dd>

  <dt>interval.type</dt>
<dd><p>See Details below</p></dd>

  <dt>ties</dt>
<dd><p>See Details below</p></dd>

  <dt>df</dt>
<dd><p>Degrees of freedom for a t-distribution. <code>Inf</code> requests a Normal distribution,
   <code>NULL</code> uses <code><a href="svychisq.html">degf</a></code>. Not relevant for <code>type="betaWald"</code></p></dd>

  <dt>return.replicates</dt>
<dd><p>Return the replicate means?</p></dd>

  <dt>na.rm</dt>
<dd><p>Remove <code>NA</code>s?</p></dd>

  <dt>...</dt>
<dd><p>arguments for future expansion</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The definition of the CDF and thus of the quantiles is ambiguous in
  the presence of ties.  With <code>ties="discrete"</code> the data are
  treated as genuinely discrete, so the CDF has vertical steps at tied
  observations. With <code>ties="rounded"</code> all the weights for tied
  observations are summed and the CDF interpolates linearly between
  distinct observed values, and so is a continuous function.  Combining
  <code>interval.type="betaWald"</code> and <code>ties="discrete"</code> is (close
  to) the proposal of Shah and Vaish(2006) used in some versions of SUDAAN.</p>  
<p>Interval estimation for quantiles is complicated, because the
  influence function is not continuous.  Linearisation cannot be used
  directly, and computing the variance of replicates is valid only for
  some designs (eg BRR, but not jackknife). The <code>interval.type</code>
  option controls how the intervals are computed.</p>  
<p>For <code>survey.design</code> objects the default is
  <code>interval.type="Wald"</code>. A 95% Wald confidence interval is
  constructed for the proportion below the estimated quantile. The
  inverse of the estimated CDF is used to map this to a confidence
  interval for the quantile. This is the method of Woodruff
  (1952). For <code>"betaWald"</code> the same procedure is used, but the
  confidence interval for the proportion is computed using the exact
  binomial cdf with an effective sample size proposed by Korn &amp;
  Graubard (1998).</p>

<p>If <code>interval.type="score"</code> we use a method described by Binder
  (1991) and due originally to Francisco and Fuller (1986), which
  corresponds to inverting a robust score test.  At the upper and lower
  limits of the confidence interval, a test of the null hypothesis that
  the cumulative distribution function is equal to the target quantile
  just rejects.  This was the default before version 2.9. It is much
  slower than <code>"Wald"</code>, and Dorfman &amp; Valliant (1993) suggest it is
  not any more accurate.</p>  
<p>Standard errors are computed from these confidence intervals by
  dividing the confidence interval length by <code>2*qnorm(alpha/2)</code>.</p>  
<p>For replicate-weight designs, ordinary replication-based standard errors
  are valid for BRR and Fay's method, and for some bootstrap-based
  designs, but not for jackknife-based designs.
  <code>interval.type="quantile"</code> gives these replication-based
  standard errors.  The default, <code>interval.type="probability"</code>
  computes confidence on the probability scale and then transforms
  back to quantiles, the equivalent of <code>interval.type="Wald"</code> for
  <code>survey.design</code> objects (with <code>alpha=0.05</code>).</p>
<p>There is a <code>confint</code> method for <code>svyquantile</code> objects; it
  simply extracts the pre-computed confidence interval.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>returns a list whose first component is the quantiles and second
  component is the confidence intervals. For replicate weight designs,
  returns an object of class <code>svyrepstat</code>.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Thomas Lumley</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="svykm.html">svykm</a></code> for quantiles of survival curves</p>
<p><code><a href="svyciprop.html">svyciprop</a></code> for confidence intervals on proportions.</p></div>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Binder DA (1991) Use of estimating functions for interval estimation
  from complex surveys. <em>Proceedings of the ASA Survey Research
    Methods Section</em>  1991: 34-42</p>
<p>Dorfman A, Valliant R (1993) Quantile variance estimators in complex
  surveys. Proceedings of the ASA Survey Research Methods Section. 1993: 866-871</p>
<p>Korn EL, Graubard BI. (1998) Confidence Intervals For Proportions With
  Small Expected Number of Positive Counts Estimated From Survey
  Data. Survey Methodology 23:193-201.</p>  
<p>Francisco CA, Fuller WA (1986) Estimation of the distribution
  function with a complex survey. Technical Report, Iowa State
  University.</p>  
<p>Shao J, Tu D (1995) <em>The Jackknife and Bootstrap</em>. Springer.</p>
<p>Shah BV, Vaish AK (2006) Confidence Intervals for Quantile Estimation
  from Complex Survey Data. Proceedings of the Section on Survey
  Research Methods.</p>  
<p>Woodruff RS (1952) Confidence intervals for medians and other
  position measures. JASA 57, 622-627.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">api</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co">## population</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">apipop</span><span class="op">$</span><span class="va">api00</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>,<span class="fl">.5</span>,<span class="fl">.75</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25% 50% 75% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 565 667 761 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">## one-stage cluster sample</span></span></span>
<span class="r-in"><span>  <span class="va">dclus1</span><span class="op">&lt;-</span><span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>id<span class="op">=</span><span class="op">~</span><span class="va">dnum</span>, weights<span class="op">=</span><span class="op">~</span><span class="va">pw</span>, data<span class="op">=</span><span class="va">apiclus1</span>, fpc<span class="op">=</span><span class="op">~</span><span class="va">fpc</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">oldsvyquantile</span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">dclus1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>,<span class="fl">.5</span>,<span class="fl">.75</span><span class="op">)</span>,ci<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         0.25 0.5  0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00 551.75 652 717.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , api00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            0.25      0.5     0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (lower 490.5049 557.1892 691.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> upper) 626.9903 714.0000 772.7397</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>  <span class="fu">oldsvyquantile</span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">dclus1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>,<span class="fl">.5</span>,<span class="fl">.75</span><span class="op">)</span>,ci<span class="op">=</span><span class="cn">TRUE</span>,interval.type<span class="op">=</span><span class="st">"betaWald"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         0.25 0.5  0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00 551.75 652 717.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , api00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            0.25      0.5     0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (lower 495.3133 554.2038 684.0202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> upper) 636.7716 714.7962 761.0759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>  <span class="fu">oldsvyquantile</span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">dclus1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>,<span class="fl">.5</span>,<span class="fl">.75</span><span class="op">)</span>,ci<span class="op">=</span><span class="cn">TRUE</span>,df<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         0.25 0.5  0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00 551.75 652 717.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , api00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            0.25      0.5     0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (lower 490.5049 557.1892 691.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> upper) 626.9903 714.0000 772.7397</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">dclus1</span><span class="op">&lt;-</span><span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>id<span class="op">=</span><span class="op">~</span><span class="va">dnum</span>, weights<span class="op">=</span><span class="op">~</span><span class="va">pw</span>, data<span class="op">=</span><span class="va">apiclus1</span>, fpc<span class="op">=</span><span class="op">~</span><span class="va">fpc</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">(</span><span class="va">qapi</span><span class="op">&lt;-</span><span class="fu">oldsvyquantile</span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">dclus1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>,<span class="fl">.5</span>,<span class="fl">.75</span><span class="op">)</span>,ci<span class="op">=</span><span class="cn">TRUE</span>, interval.type<span class="op">=</span><span class="st">"score"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         0.25 0.5  0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00 551.75 652 717.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , api00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            0.25      0.5     0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (lower 512.0003 565.9999 662.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> upper) 638.9998 702.9995 753.9996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span>  <span class="fu"><a href="SE.html">SE</a></span><span class="op">(</span><span class="va">qapi</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     0.25      0.5     0.75 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29.60654 31.93782 21.44726 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#stratified sample</span></span></span>
<span class="r-in"><span>  <span class="va">dstrat</span><span class="op">&lt;-</span><span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>id<span class="op">=</span><span class="op">~</span><span class="fl">1</span>, strata<span class="op">=</span><span class="op">~</span><span class="va">stype</span>, weights<span class="op">=</span><span class="op">~</span><span class="va">pw</span>, data<span class="op">=</span><span class="va">apistrat</span>, fpc<span class="op">=</span><span class="op">~</span><span class="va">fpc</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">oldsvyquantile</span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">dstrat</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>,<span class="fl">.5</span>,<span class="fl">.75</span><span class="op">)</span>,ci<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $quantiles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           0.25      0.5     0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> api00 562.2056 667.2358 755.1226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> , , api00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            0.25      0.5     0.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (lower 534.0000 636.2683 724.9898</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> upper) 594.4526 681.0000 777.0392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co">#stratified sample, replicate weights</span></span></span>
<span class="r-in"><span>  <span class="co"># interval="probability" is necessary for jackknife weights</span></span></span>
<span class="r-in"><span>  <span class="va">rstrat</span><span class="op">&lt;-</span><span class="fu"><a href="as.svrepdesign.html">as.svrepdesign</a></span><span class="op">(</span><span class="va">dstrat</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">oldsvyquantile</span><span class="op">(</span><span class="op">~</span><span class="va">api00</span>, <span class="va">rstrat</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>,<span class="fl">.5</span>,<span class="fl">.75</span><span class="op">)</span>, interval.type<span class="op">=</span><span class="st">"probability"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistic:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          api00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.25 562.2056</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.5  667.2358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.75 755.1226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SE:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          api00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.25 15.26348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.5  11.42383</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.75 13.26813</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># BRR method</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">scd</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">repweights</span><span class="op">&lt;-</span><span class="fl">2</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">scdrep</span><span class="op">&lt;-</span><span class="fu"><a href="svrepdesign.html">svrepdesign</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">scd</span>, type<span class="op">=</span><span class="st">"BRR"</span>, repweights<span class="op">=</span><span class="va">repweights</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>No sampling weights provided: equal probability assumed</span>
<span class="r-in"><span>  <span class="fu">oldsvyquantile</span><span class="op">(</span><span class="op">~</span><span class="va">arrests</span><span class="op">+</span><span class="va">alive</span>, design<span class="op">=</span><span class="va">scdrep</span>, quantile<span class="op">=</span><span class="fl">0.5</span>, interval.type<span class="op">=</span><span class="st">"quantile"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistic:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      arrests alive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.5     185    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SE:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       arrests    alive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.5 15.02706 4.756574</span>
<span class="r-in"><span>  <span class="fu">oldsvyquantile</span><span class="op">(</span><span class="op">~</span><span class="va">arrests</span><span class="op">+</span><span class="va">alive</span>, design<span class="op">=</span><span class="va">scdrep</span>, quantile<span class="op">=</span><span class="fl">0.5</span>, interval.type<span class="op">=</span><span class="st">"quantile"</span>,df<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Statistic:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      arrests alive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.5     185    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SE:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       arrests    alive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0.5 15.02706 4.756574</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> </span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by “Thomas Lumley”.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

