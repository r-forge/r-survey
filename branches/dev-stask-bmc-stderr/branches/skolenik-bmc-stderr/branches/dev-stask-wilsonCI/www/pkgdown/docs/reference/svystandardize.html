<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Direct standardization within domains — svystandardize • survey</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Direct standardization within domains — svystandardize"><meta property="og:description" content="In health surveys it is often of interest to standardize domains to have the same distribution of, eg, age as in a target population.  The operation is similar to post-stratification, except that the totals for the domains are fixed at the current estimates, not at known population values.  This function matches the estimates produced by the (US) National Center for Health Statistics."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">survey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Direct standardization within domains</h1>
    
    <div class="hidden name"><code>svystandardize.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>In health surveys it is often of interest to standardize domains to have the same distribution of, eg, age as in a target population.  The operation is similar to post-stratification, except that the totals for the domains are fixed at the current estimates, not at known population values.  This function matches the estimates produced by the (US) National Center for Health Statistics.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">svystandardize</span><span class="op">(</span><span class="va">design</span>, <span class="va">by</span>, <span class="va">over</span>, <span class="va">population</span>, excluding.missing <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>design</dt>
<dd><p>survey design object</p></dd>

  <dt>by</dt>
<dd><p>A one-sided formula specifying the variables whose distribution will be standardised</p></dd>

  <dt>over</dt>
<dd><p>A one-sided formula specifying the domains within which the
standardisation will occur, or <code>~1</code> to use the whole population.</p></dd>

  <dt>population</dt>
<dd><p>Desired population totals or proportions for the levels of combinations of variables in <code>by</code></p></dd>

  <dt>excluding.missing</dt>
<dd><p>Optionally, a one-sided formula specifying variables whose missing values should be dropped before calculating the domain totals.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A new survey design object of the same type as the input.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>National Center for Health Statistics <code>https://www.cdc.gov/nchs/tutorials/NHANES/NHANESAnalyses/agestandardization/age_standardization_intro.htm</code></p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The standard error estimates do not exactly match the NCHS estimates</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="postStratify.html">postStratify</a></code>, <code><a href="svyby.html">svyby</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## matches http://www.cdc.gov/nchs/data/databriefs/db92_fig1.png</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">nhanes</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">popage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">55901</span> , <span class="fl">77670</span> , <span class="fl">72816</span> , <span class="fl">45364</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">design</span><span class="op">&lt;-</span><span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>id<span class="op">=</span><span class="op">~</span><span class="va">SDMVPSU</span>, strata<span class="op">=</span><span class="op">~</span><span class="va">SDMVSTRA</span>, weights<span class="op">=</span><span class="op">~</span><span class="va">WTMEC2YR</span>, data<span class="op">=</span><span class="va">nhanes</span>, nest<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">stdes</span><span class="op">&lt;-</span><span class="fu">svystandardize</span><span class="op">(</span><span class="va">design</span>, by<span class="op">=</span><span class="op">~</span><span class="va">agecat</span>, over<span class="op">=</span><span class="op">~</span><span class="va">race</span><span class="op">+</span><span class="va">RIAGENDR</span>, </span></span>
<span class="r-in"><span>   population<span class="op">=</span><span class="va">popage</span>, excluding.missing<span class="op">=</span><span class="op">~</span><span class="va">HI_CHOL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="svyby.html">svyby</a></span><span class="op">(</span><span class="op">~</span><span class="va">HI_CHOL</span>, <span class="op">~</span><span class="va">race</span><span class="op">+</span><span class="va">RIAGENDR</span>, <span class="va">svymean</span>, design<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">stdes</span>,</span></span>
<span class="r-in"><span><span class="va">agecat</span><span class="op">!=</span><span class="st">"(0,19]"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     race RIAGENDR   HI_CHOL          se</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1.1    1        1 0.1543786 0.008318204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2.1    2        1 0.1142946 0.010182838</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3.1    3        1 0.1020776 0.013547678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.1    4        1 0.1358312 0.042274271</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1.2    1        2 0.1316436 0.013418637</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2.2    2        2 0.1543247 0.008932134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3.2    3        2 0.1025411 0.018953586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4.2    4        2 0.1197434 0.040091106</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">nhanes</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nhanes_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="svydesign.html">svydesign</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="op">~</span> <span class="va">SDMVPSU</span>, strata <span class="op">=</span> <span class="op">~</span> <span class="va">SDMVSTRA</span>, </span></span>
<span class="r-in"><span>                        weights <span class="op">=</span> <span class="op">~</span> <span class="va">WTMEC2YR</span>, nest <span class="op">=</span> <span class="cn">TRUE</span>, data <span class="op">=</span> <span class="va">nhanes</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## These are the same</span></span></span>
<span class="r-in"><span><span class="va">nhanes_adj</span> <span class="op">&lt;-</span> <span class="fu">svystandardize</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">nhanes_design</span>, all_adults <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 by <span class="op">=</span> <span class="op">~</span> <span class="va">agecat</span>, over <span class="op">=</span> <span class="op">~</span> <span class="va">all_adults</span>,</span></span>
<span class="r-in"><span>                 population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">55901</span>, <span class="fl">77670</span>, <span class="fl">72816</span>, <span class="fl">45364</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                 excluding.missing <span class="op">=</span> <span class="op">~</span> <span class="va">HI_CHOL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svymean</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">HI_CHOL</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>, <span class="va">nhanes_adj</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>     </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         mean     SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> I(HI_CHOL == 1)FALSE 0.89413 0.0053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> I(HI_CHOL == 1)TRUE  0.10587 0.0053</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nhanes_adj</span> <span class="op">&lt;-</span> <span class="fu">svystandardize</span><span class="op">(</span><span class="va">nhanes_design</span>,</span></span>
<span class="r-in"><span>                 by <span class="op">=</span> <span class="op">~</span> <span class="va">agecat</span>, over <span class="op">=</span> <span class="op">~</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                 population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">55901</span>, <span class="fl">77670</span>, <span class="fl">72816</span>, <span class="fl">45364</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                 excluding.missing <span class="op">=</span> <span class="op">~</span> <span class="va">HI_CHOL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="surveysummary.html">svymean</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">HI_CHOL</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>, <span class="va">nhanes_adj</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>     </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                         mean     SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> I(HI_CHOL == 1)FALSE 0.89413 0.0053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> I(HI_CHOL == 1)TRUE  0.10587 0.0053</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by “Thomas Lumley”.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

